<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <title>Dating-app</title>
  </head>
  <body>
    <div class="container">
      <div class="side">
        <div class="header">
          <div class="avatar">
            <img
              src="https://randomuser.me/api/portraits/women/15.jpg"
              alt=""
            />
          </div>
          <div class="title">Min profil</div>
        </div>
        <div class="menu">
          <ul>
            <li>Matches</li>
            <li class="active">Meldinger</li>
          </ul>
        </div>
        <div class="messages">
          <div class="avatar">
            <img
              src="https://randomuser.me/api/portraits/women/79.jpg"
              alt=""
            />
          </div>
          <div class="message">
            <div class="user">Nasreen</div>
            <div class="text">
              Lorem ipsum dolor sit amet consectetur adipisicing
            </div>
          </div>
        </div>
        <div class="messages">
          <div class="avatar">
            <img
              src="https://randomuser.me/api/portraits/women/71.jpg"
              alt=""
            />
          </div>
          <div class="message">
            <div class="user">Memona</div>
            <div class="text">
              Lorem ipsum dolor sit amet consectetur adipisicing
            </div>
          </div>
        </div>
        <div class="messages">
          <div class="avatar">
            <img
              src="https://randomuser.me/api/portraits/women/90.jpg"
              alt=""
            />
          </div>
          <div class="message">
            <div class="user">Vidurja</div>
            <div class="text">
              Lorem ipsum dolor sit amet consectetur adipisicing
            </div>
          </div>
        </div>
        <div class="messages">
          <div class="avatar">
            <img src="https://randomuser.me/api/portraits/men/86.jpg" alt="" />
          </div>
          <div class="message">
            <div class="user">Hassan</div>
            <div class="text">
              Lorem ipsum dolor sit amet consectetur adipisicing
            </div>
          </div>
        </div>
        <div class="messages">
          <div class="avatar">
            <img
              src="https://randomuser.me/api/portraits/women/12.jpg"
              alt=""
            />
          </div>
          <div class="message">
            <div class="user">Nora</div>
            <div class="text">
              Lorem ipsum dolor sit amet consectetur adipisicing
            </div>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="card" id="random-user-card"></div>
        <div class="user"></div>
        <img class="user" src="" alt="" />
        <div class="profile">
          <div class="name"><span></span></div>
          <div class="local">
            <!--<i class=></i>-->
            <span></span>
          </div>
        </div>

        <div class="buttons">
          <div class="no">
            <i class="fas fa-times"></i>
          </div>
          <div class="star">
            <i class="fas fa-star fa"></i>
          </div>
          <div class="heart">
            <i class="fas fa-heart"></i>
          </div>
        </div>

        <div class="swipe-container">
          <p>You have <span id="swipe-count">10</span> swipes left</p>
        </div>
        <div class="genderbuttons">
          <input type="button" value="Woman" id="woman-btn" />
          <input type="button" value="Man" id="man-btn" />
          <input type="button" value="Both" id="both-btn" />
        </div>
      </div>
    </div>

    <script>
      function createRandomUserCard(randomUser) {
        const userDiv = document.createElement("div");
        userDiv.classList.add("user");

        const img = document.createElement("img");
        img.classList.add("user");
        img.src = randomUser.picture.large;
        img.alt = `${randomUser.name.first} ${randomUser.name.last}`;

        const profileDiv = document.createElement("div");
        profileDiv.classList.add("profile");

        const nameDiv = document.createElement("div");
        nameDiv.classList.add("name");
        nameDiv.textContent = `${randomUser.name.first} ${randomUser.name.last} `;
        const ageSpan = document.createElement("span");
        ageSpan.textContent = randomUser.dob.age;
        nameDiv.appendChild(ageSpan);

        const localDiv = document.createElement("div");
        localDiv.classList.add("local");
        const markerIcon = document.createElement("i");
        markerIcon.classList.add("fas", "fa-map-marker-alt");
        const locationSpan = document.createElement("span");
        locationSpan.textContent = `${randomUser.location.city}, ${randomUser.location.country}`;
        localDiv.appendChild(markerIcon);
        localDiv.appendChild(locationSpan);

        profileDiv.appendChild(nameDiv);
        profileDiv.appendChild(localDiv);

        userDiv.appendChild(img);
        userDiv.appendChild(profileDiv);

        return userDiv;
      }

      function fetchRandomUser() {
        const apiUrl = "https://randomuser.me/api/";

        fetch(apiUrl)
          .then((response) => response.json())
          .then((data) => {
            const randomUser = data.results[0];
            const randomUserCardDiv =
              document.getElementById("random-user-card");
            const randomUserCard = createRandomUserCard(randomUser);
            randomUserCardDiv.innerHTML = "";
            randomUserCardDiv.appendChild(randomUserCard);
          })
          .catch((error) => {
            console.error("Error fetching random user:", error);
          });
      }
      fetchRandomUser();

      const noBtn = document.querySelector(".no");
      const heartBtn = document.querySelector(".heart");

      let swipeCount = 10;

      function updateSwipeCount() {
        const swipeCountElement = document.getElementById("swipe-count");
        if (swipeCountElement) {
          swipeCountElement.textContent = swipeCount;
        }
      }

      function handleSwipe() {
        if (swipeCount > 0) {
          swipeCount--;
          updateSwipeCount();
        } else {
          alert("You have run out of swipes!");
        }
      }

      noBtn.addEventListener("click", handleSwipe);

      heartBtn.addEventListener("click", handleSwipe);

      updateSwipeCount();
      

      const womanBtn = document.getElementById("woman-btn");
      const manBtn = document.getElementById("man-btn");
      const bothBtn = document.getElementById("both-btn");

      womanBtn.addEventListener("click", function () {
        fetchAndDisplayProfiles("female");
      });

      manBtn.addEventListener("click", function () {
        fetchAndDisplayProfiles("male");
      });

      bothBtn.addEventListener("click", function () {
        fetchAndDisplayProfiles("");
      });

      function fetchAndDisplayProfiles(gender) {
        const apiUrl = `https://randomuser.me/api/?gender=${gender}`;

        fetch(apiUrl)
          .then((response) => response.json())
          .then((data) => {
            const profile = data.results[0];
            const randomUserCardDiv =
              document.getElementById("random-user-card");

            randomUserCardDiv.innerHTML = "";

            const randomUserCard = createRandomUserCard(profile);
            randomUserCardDiv.appendChild(randomUserCard);
          })
          .catch((error) => {
            console.error("Error fetching profile:", error);
          });
      }
    </script>
  </body>
</html>
